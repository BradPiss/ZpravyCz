{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div style="max-width: 800px; margin: 0 auto;">

    <a href="/" class="back-btn" style="display:inline-flex; align-items:center; gap:8px; color:var(--blue); font-weight:600; font-size:15px; text-decoration:none; margin-bottom:24px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 11H7.83l4.88-4.88c.39-.39.39-1.03 0-1.42-.39-.39-1.02-.39-1.41 0l-6.59 6.59c-.39.39-.39 1.02 0 1.41l6.59 6.59c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L7.83 13H19c.55 0 1-.45 1-1s-.45-1-1-1z"/>
        </svg>
        <span>Zpět na hlavní stránku</span>
    </a>

    <header class="category-header">
        <h1 style="font-size: 34px; font-weight: 800; color: var(--text); margin: 0 0 8px 0;">
            {{ category.name }}
        </h1>
        {% if category.description %}
        <p style="font-size: 16px; color: var(--muted); margin: 0;">
            {{ category.description }}
        </p>
        {% endif %}
    </header>

    <div class="category-list">
        {% for article in articles %}
        <article class="cat-article-card">
            <div class="cat-img-wrapper">
                <a href="{{ url_for('article_detail', article_id=article.id) }}">
                    {% if article.image_url %}
                    <img src="{{ article.image_url }}" alt="{{ article.title }}" class="cat-img">
                    {% else %}
                    <div class="cat-img" style="background:var(--border); display:flex; align-items:center; justify-content:center; color:var(--muted);">
                        Bez obrázku
                    </div>
                    {% endif %}
                </a>
            </div>

            <div class="cat-content">
                <div style="margin-bottom: 6px;">
                    <span class="news-time">Dnes {{ article.created_at.strftime('%H:%M') }}</span>
                </div>
                
                <h2 class="cat-headline">
                    <a href="{{ url_for('article_detail', article_id=article.id) }}">
                        {{ article.title }}
                    </a>
                </h2>
                
                <p class="cat-perex">
                    {{ article.perex }}
                </p>
            </div>
        </article>
        {% endfor %}

        {% if not articles %}
        <div style="text-align:center; padding: 40px; color: var(--muted);">
            V této rubrice zatím nejsou žádné články.
        </div>
        {% endif %}
    </div>

    {% if articles %}
    <div class="load-more-wrapper">
        <button class="load-more-btn" style="margin: 0 auto;">
            <span>Zobrazit další články</span>
            <span>▼</span>
        </button>
    </div>
    {% endif %}

</div>
{% endblock %}